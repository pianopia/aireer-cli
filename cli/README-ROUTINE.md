# 思考ルーチン機能

aireer CLIの思考ルーチン機能を使用すると、あなたの思考パターンを構造化してルーチンとして登録し、AI自律モードで自動実行できます。

## 基本的な使用方法

### 1. 新しい思考ルーチンを作成

```bash
aireer routine create
```

このコマンドを実行すると、インタラクティブなプロンプトが表示され、以下の手順で思考ルーチンを作成できます：

1. **基本情報の入力**
   - ルーチン名
   - 説明
   - アクティブ化の設定

2. **思考ステップの定義**
   - 事前定義されたテンプレートの選択
   - カスタムステップの定義

3. **確認と保存**

### 2. 登録済みルーチンの一覧表示

```bash
aireer routine list
```

登録されているすべての思考ルーチンを表示します。各ルーチンの以下の情報が表示されます：

- ルーチン名とステータス（アクティブ/非アクティブ）
- ルーチンID
- 説明
- ステップ数
- 作成日時

## 思考テンプレート

### 📊 分析思考テンプレート

問題や状況を構造化して分析するためのテンプレートです。

**ステップ:**
1. 分析対象を明確化する
2. 情報収集と整理
3. 構造化分析
4. 結論と提案の導出

**適用場面:**
- ビジネス分析
- 問題の原因調査
- データ分析
- 市場調査

### 💡 創造思考テンプレート

アイデア発想とブレインストーミングを支援するテンプレートです。

**ステップ:**
1. 創造的思考の準備
2. アイデア発散
3. アイデア収束
4. アイデア具体化

**適用場面:**
- 新商品・サービスの企画
- クリエイティブな問題解決
- イノベーション創出
- デザイン思考

### 🎯 意思決定テンプレート

選択肢を評価して最適な決定を行うためのテンプレートです。

**ステップ:**
1. 意思決定の枠組み設定
2. 選択肢の洗い出し
3. 選択肢の評価
4. 最終決定と実行計画

**適用場面:**
- 戦略的意思決定
- 投資判断
- 人事決定
- 技術選択

### 🔍 問題解決テンプレート

課題特定から解決まで体系的にアプローチするテンプレートです。

**ステップ:**
1. 問題の特定と定義
2. 原因分析
3. 解決策の発想と評価
4. 解決策の実装と検証

**適用場面:**
- トラブルシューティング
- プロセス改善
- 品質問題の解決
- システム障害対応

## カスタムルーチンの作成

事前定義されたテンプレートに加えて、独自の思考ステップを定義することもできます。

### ステップの種類

- **🔍 条件/判断**: 状況を評価し、条件をチェック
- **⚡ アクション**: 具体的な行動や処理を実行
- **🔄 ループ**: 繰り返し処理や反復思考

### パラメータの設定

各ステップには、JSON形式で追加のパラメータを設定できます：

```json
{
  "focus": "分析の焦点",
  "methods": ["手法1", "手法2"],
  "criteria": ["基準1", "基準2"]
}
```

## 自律モードでの実行

作成した思考ルーチンは、AI自律モードで自動実行されます：

```bash
aireer autonomous
```

自律モードでは、以下の仕組みで思考ルーチンが実行されます：

1. **ルーチンの取得**: アクティブな思考ルーチンを取得
2. **優先度管理**: 各ルーチンの優先度と重みに基づいて実行順序を決定
3. **自動実行**: LLMがルーチンの内容を解釈して実行
4. **結果記録**: 実行結果と成功率を記録

## 優先度管理

思考ルーチンの実行優先度を管理できます：

```bash
# 現在の優先度設定を表示
aireer priority --show

# 特定のルーチンの優先度を設定（1-10, 10が最高）
aireer priority --set <ルーチンID>:8

# 特定のルーチンの重みを設定（実行確率の調整）
aireer priority --weight <ルーチンID>:1.5
```

## 認証

思考ルーチンの作成・管理には認証が必要です：

```bash
# ログイン
aireer login

# アカウント作成
aireer register
```

## APIエンドポイント

- **ローカル開発**: `http://localhost:3000`
- **本番環境**: `https://api.aireer.work`

## 実行履歴とモニタリング

思考ルーチンの実行履歴を詳細に記録・確認できます。

### 実行履歴の表示

```bash
# 最新20件の実行履歴を表示
aireer routine history

# 表示件数を指定
aireer routine history --limit 50

# 特定のルーチンの履歴のみ表示
aireer routine history --routine-id <ルーチンID>
```

**表示内容:**
- 実行時刻
- ルーチン名
- 実行結果（成功/失敗）
- 実行時間
- エラー詳細（失敗時）
- LLMプロンプト（詳細履歴）
- ファイル操作記録

### 実行統計の表示

```bash
# 過去7日間の統計情報を表示
aireer routine stats

# 過去30日間の統計を表示
aireer routine stats --days 30
```

**統計情報:**
- 総実行数と成功率
- ルーチン別の実行回数と成功率
- 平均実行時間
- 最終実行日時

### 履歴の保存場所

実行履歴は以下の場所に保存されます：

1. **APIサーバー**: 基本的な実行結果（成功/失敗、実行時刻等）
2. **ローカルファイル**: 詳細な実行履歴（`.aireer-execution-history.json`）
   - LLMへ送信したプロンプト
   - LLMからのレスポンス
   - ファイル操作の詳細
   - システムコンテキスト

### 履歴の活用

実行履歴を活用することで：

- **パフォーマンス分析**: どのルーチンが効果的か把握
- **エラー分析**: 失敗パターンの特定と改善
- **最適化**: 実行時間やリソース使用量の最適化
- **学習**: 成功したプロンプトや戦略の再利用

## 例：朝の思考整理ルーチン

```bash
aireer routine create
```

1. **名前**: "朝の思考整理"
2. **説明**: "一日の始まりに頭を整理し、優先順位を明確にする"
3. **テンプレート**: "📊 分析思考テンプレート"
4. **アクティブ化**: はい

このルーチンが作成されると、自律モードで定期的に実行され、一日の計画立てや優先順位の整理が自動化されます。

### 実行履歴の確認例

```bash
aireer routine history --routine-id routine_abc123

✅ 3件の実行履歴が見つかりました

1. 朝の思考整理 ✅ 成功
   実行時刻: 2024/01/15 09:00:15
   メッセージ: 正常に実行されました
   実行時間: 2,340ms

2. 朝の思考整理 ❌ 失敗
   実行時刻: 2024/01/14 09:00:12
   メッセージ: LLM APIからレスポンスが得られませんでした
   エラー: ネットワークエラー
   実行時間: 1,200ms

3. 朝の思考整理 ✅ 成功
   実行時刻: 2024/01/13 09:00:08
   メッセージ: 正常に実行されました
   実行時間: 1,890ms
```

## トラブルシューティング

### 認証エラー
```bash
❌ 認証が必要です。"aireer login"でログインしてください。
```
→ `aireer login` でログインしてください

### ルーチンが表示されない
```bash
📝 登録されているルーチンはありません
```
→ `aireer routine create` で新しいルーチンを作成してください

### API接続エラー
→ ネットワーク接続とAPIサーバーの状態を確認してください 